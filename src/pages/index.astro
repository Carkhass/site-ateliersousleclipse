---
import BaseLayout from '../layouts/BaseLayout.astro';
---

<BaseLayout 
  title="Atelier sous l’éclipse – Coutelier artisanal en France"
  description="Découvrez l’Atelier sous l’éclipse : des couteaux artisanaux uniques, entièrement fabriqués main avec passion en France. Acier haut de gamme, manches en bois nobles, finitions d’exception."
  ogImage="/images/og-home.jpg"
  url="https://www.latelier-sous-leclipse.fr/"
>

<!-- ========================================================= -->
<!-- SECTION CENTRALE                                          -->
<!-- ========================================================= -->
<section class="container1 mx-auto px-4 py-16 grid md:grid-cols-2 gap-12 items-center">
  <div class="relative fade-slide-left">
    <img 
      src="/images/portrait-yann.jpg" 
      alt="Portrait de Yann, artisan coutelier français"
      class="img-zoom max-w-md w-full h-auto rounded-lg shadow-xl object-cover border-4 border-accent mx-auto md:ml-auto"
      tabindex="0"
    />
  </div>
  <div class="fade-slide-left text-center md:text-left"">
    <h2 class="text-3xl md:text-4xl font-serif font-bold mb-6 text-accent reveal-child">
      Bienvenue à l’atelier sous l’éclipse
    </h2>
    <p class="text-lg text-muted leading-relaxed mb-4 reveal-child">
      Mon premier langage fut celui des ordinateurs, un univers où la précision est une loi et la patience une vertu.<br />
      Aujourd'hui, je parle une autre langue : celle du métal et du bois.<br />
    </p>
    <p class="text-lg text-muted leading-relaxed mb-6 reveal-child">
      Au fil des années j'ai affiné mon savoir-faire, nourri par la pratique et la passion.<br />
      Aujourd'hui, je mets cette expérience au service de celles et ceux qui recherchent<br />
      des pièces uniques, façonnées avec soin et pensées pour durer.
    </p>
    <a href="/me-connaitre" class="cta-premium inline-block px-6 py-3 text-white rounded reveal-child">
      En savoir plus
    </a>
  </div>
</section>


  <!-- ========================================================= -->
  <!-- SECTION POINÇON -->
  <!-- ========================================================= -->
  <section 
    class="parallax-section poincon-section relative w-screen h-[60vh] overflow-hidden" 
    data-parallax-speed="120"
    data-parallax-zoom="1"
    data-parallax-zoom-strength="0.2"
  >
    <div class="absolute inset-0" data-parallax-target style="transform: translateY(-23.48px) scale(1); will-change: transform;">
      <img src="/images/gros-plan-poincon.webp" alt="Détail poinçon YJ atelier sous l'éclipse sur lame artisanale" class="w-full h-full object-cover" />
    </div>
 
  </section>



<!-- ========================================================= -->
<!-- SECTION COUTEAUX - THEME CUISINE -->
<!-- ========================================================= -->
<section class="section-couteaux theme-cuisine">
  <div class="section-2-grid mx-auto px-4 grid gap-12 items-center lg:grid-cols-[65%_35%]">

    <!-- Colonne 1 : Slider couteaux -->
    <div class="swiper my-knives-swiper fade-slide-left">
      <div class="swiper-wrapper">

        <!-- Slide : Nakiri -->
        <div class="swiper-slide">
          <figure>
            <div class="knife-image">
              <img src="/images/cuisine/detoure-nakiri-large.png" alt="Couteau de cuisine Nakiri Atelier sous l'éclipse C125U hamon noyer stabilisé" />
            </div>
            <figcaption>Nakiri</figcaption>
          </figure>
        </div>

        <!-- Slide : Petty -->
        <div class="swiper-slide">
          <figure>
            <div class="knife-image">
              <img src="/images/cuisine/detoure-petty1-small.png" alt="Couteau de cuisine Petty Atelier sous l'éclipse C125U hamon bois naturel" />
            </div>
            <figcaption>Petty</figcaption>
          </figure>
        </div>

        <!-- Slide : Grand Bon'ap -->
        <div class="swiper-slide">
          <figure>
            <div class="knife-image">
              <img src="/images/cuisine/detoure-grand-bonap6-large.png" alt="Couteau de cuisine Grand Bon'ap Atelier sous l'éclipse C125U hamon bois d'olivier" />
            </div>
            <figcaption>Grand Bon'ap</figcaption>
          </figure>
        </div>

        <!-- Slide : Santoku -->
        <div class="swiper-slide">
          <figure>
            <div class="knife-image">
              <img src="/images/cuisine/detoure-santoku1-medium.png" alt="Couteau de cuisine Santoku Atelier sous l'éclipse C125U hamon hêtre échauffé stabilisé" />
            </div>
            <figcaption>Santoku</figcaption>
          </figure>
        </div>

        <!-- Slide : Lance à huîtres -->
        <div class="swiper-slide">
          <figure>
            <div class="knife-image">
              <img src="/images/cuisine/detoure-lance1-small.png" alt="Couteau de cuisine Lance à huîtres Atelier sous l'éclipse 80CRV2 bois de fer acid stonewash" />
            </div>
            <figcaption>Lance à huîtres</figcaption>
          </figure>
        </div>

        <!-- Slide : Long Bon'ap -->
        <div class="swiper-slide">
          <figure>
            <div class="knife-image">
              <img src="/images/cuisine/detoure-long-bonap-xlarge.png" alt="Couteau de cuisine Long Bon'ap Atelier sous l'éclipse C125U hamon cocobolo" />
            </div>
            <figcaption>Long Bon'ap</figcaption>
          </figure>
        </div>

        <!-- Slide : Baby Bon'ap -->
        <div class="swiper-slide">
          <figure>
            <div class="knife-image">
              <img src="/images/cuisine/detoure-baby-bonap-small.png" alt="Couteau de cuisine Baby Bon'ap Atelier sous l'éclipse C100 hamon noyer" />
            </div>
            <figcaption>Baby Bon'ap</figcaption>
          </figure>
        </div>

      </div>

      <!-- Pagination interne -->
      <div class="swiper-pagination"></div>

      <!-- Navigation -->
      <div class="swiper-button-prev"></div>
      <div class="swiper-button-next"></div>
    </div>

    <!-- Colonne 2 : Texte -->
    <div class="fade-slide-right w-3/4 mr-auto">    
      <h2 class="text-3xl md:text-4xl font-serif font-bold mb-6 text-accent reveal-child">
        En cuisine&nbsp;!
      </h2>
      <p class="text-lg text-muted leading-relaxed reveal-child">
        Je prends un plaisir particulier à façonner des couteaux de cuisine — la gourmandise, ça ne s'invente pas ! 
        Donc la plupart de mes créations se destinent aux arts de la table.
      </p>

      <p class="text-lg text-muted leading-relaxed reveal-child">
        Du tranchant précis d'un petty à la puissance d'un grand chef, chaque couteau est pensé pour devenir 
        le prolongement naturel de la main.
      </p>
    </div>

  </div>
</section>

<!-- ========================================================= -->
<!-- SECTION COUTEAUX - THEME TABLE -->
<!-- ========================================================= -->
<section class="section-couteaux theme-table bg-surface">
  <div class="section-2-grid slider-right mx-auto px-4 grid gap-12 items-center lg:grid-cols-[35%_65%]">

    <!-- Colonne 1 : Texte -->
    <div class="fade-slide-left text-right w-3/4 ml-auto"> 
      <h2 class="text-3xl md:text-4xl font-serif font-bold mb-6 text-accent reveal-child">
        À table&nbsp;!
      </h2>
      <p class="text-Rg text-muted leading-relaxed reveal-child">
        Mariage de lignes épurées et de matériaux nobles, mes couteaux de table incarnent une vision 
        exigeante de l'art de recevoir... mais rassurez-vous, ils conviendront aussi parfaitement 
        aux repas du quotidien&nbsp;!
      </p>
    </div>

    <!-- Colonne 2 : Slider couteaux -->
    <div class="swiper my-knives-swiper fade-slide-right">
      <div class="swiper-wrapper">

        <!-- Slide : Table1 -->
        <div class="swiper-slide">
          <figure>
            <div class="knife-image">
              <img src="/images/table/détouré-table-1.png" alt="Couteau de Table Atelier sous l'éclipse C100 ébène bicolore" />
            </div>
            <figcaption>Ebène bicolore</figcaption>
          </figure>
        </div>

        <!-- Slide : Table2 -->
        <div class="swiper-slide">
          <figure>
            <div class="knife-image">
              <img src="/images/table/détouré-table-2.png" alt="Couteau de Table Atelier sous l'éclipse C100 wacapou" />
            </div>
            <figcaption>Wacapou</figcaption>
          </figure>
        </div>

        <!-- Slide : Table3 -->
        <div class="swiper-slide">
          <figure>
            <div class="knife-image">
              <img src="/images/table/détouré-table-3.png" alt="Couteau de Table Atelier sous l'éclipse C100 Loupe peuplier" />
            </div>
            <figcaption>Loupe peuplier</figcaption>
          </figure>
        </div>

      </div>

      <!-- Pagination interne -->
      <div class="swiper-pagination"></div>

      <!-- Navigation -->
      <div class="swiper-button-prev"></div>
      <div class="swiper-button-next"></div>
    </div>

  </div>
</section>

<!-- ========================================================= -->
<!-- SECTION COUTEAUX - THEME OUTDOOR -->
<!-- ========================================================= -->
<section class="section-couteaux theme-outdoor">
  <div class="section-2-grid mx-auto px-4 grid gap-12 items-center lg:grid-cols-[65%_35%]">

    <!-- Colonne 1 : Slider couteaux -->
    <div class="swiper my-knives-swiper fade-slide-left">
      <div class="swiper-wrapper">

        <!-- Slide : Outdoor 1 -->
        <div class="swiper-slide">
          <figure>
            <div class="knife-image">
              <img src="/images/outdoor/camp1.png" alt="Couteau de Camp Atelier sous l'éclipse 80CRV2 Manguier ondé stabilisé" />
            </div>
            <figcaption>Manguier ondé</figcaption>
          </figure>
        </div>

        <!-- Slide : Outdoor 2 -->
        <div class="swiper-slide">
          <figure>
            <div class="knife-image">
              <img src="/images/outdoor/camp3.png" alt="Couteau de Camp Atelier sous l'éclipse 80CRV2 morta stabilisé" />
            </div>
            <figcaption>Morta stab</figcaption>
          </figure>
        </div>

        <!-- Slide : Outdoor 3 -->
        <div class="swiper-slide">
          <figure>
            <div class="knife-image">
              <img src="/images/outdoor/camp4.png" alt="Couteau de Camp Atelier sous l'éclipse 80CRV2 ébène" />
            </div>
            <figcaption>Ebène noir</figcaption>
          </figure>
        </div>

        <!-- Slide : Outdoor 4 -->
        <div class="swiper-slide">
          <figure>
            <div class="knife-image">
              <img src="/images/outdoor/fighter.png" alt="Couteau outdoor Fighter Atelier sous l'éclipse 80CRV2 Koa" />
            </div>
            <figcaption>Fighter Koa</figcaption>
          </figure>
        </div>

      </div>

      <!-- Pagination interne -->
      <div class="swiper-pagination"></div>

      <!-- Navigation -->
      <div class="swiper-button-prev"></div>
      <div class="swiper-button-next"></div>
    </div>

    <!-- Colonne 2 : Texte -->
    <div class="fade-slide-right w-3/4 mr-auto"> 
      <h2 class="text-3xl md:text-4xl font-serif font-bold mb-6 text-accent reveal-child">
        En plein air&nbsp;!
      </h2>
      <p class="text-lg text-muted leading-relaxed reveal-child">
        Si vous avez l'esprit d'aventure, que vous aimez les grands espaces, l'odeur des forêts 
        et les sentiers reculés... L'Atelier a quelques compagnons fiables à vous proposer.
      </p>      
      <p class="text-lg text-muted leading-relaxed reveal-child">
        Aciers robustes sélectionnés pour leurs caractéristiques techniques, tranchant robuste pour 
        passer de la coupe fine à l'ouvrage le plus exigeant, mais toujours avec l'empreinte unique de l'atelier.
      </p>

      </p>
    </div>

  </div>
</section>

<script>
  import { initSwipers, initLightbox } from '../scripts/init/init-swiper-glightbox.js';

  if (typeof window !== 'undefined') {
    // Initialise tous les sliders Swiper présents dans la page
    initSwipers();

    // Initialise la lightbox sur les images ciblées
    initLightbox();
  }
</script>



<!-- ========================================================= -->
<!-- SECTION 3 : Inspiration + Galerie hamon (Embla Carousel)  -->
<!-- ========================================================= -->
<section class="w-full max-w-none bg-surface py-16 inspiration-section">

  <!-- 📝 TEXTE -->
  <div class="max-w-6xl mx-auto px-4 space-y-6 text-center fade-slide-up">
    <h2 class="text-3xl md:text-4xl font-serif font-bold text-accent reveal-child">
      Inspiration
    </h2>
    <p class="text-lg text-muted leading-relaxed reveal-child">
      L’esthétique japonaise, sobre et naturelle, m’inspire profondément. 
      J’aime travailler des matières authentiques pour les manches : textures brutes, couleurs organiques.
    </p>
    <p class="text-lg text-muted leading-relaxed reveal-child">
      Sur beaucoup de mes créations, vous remarquerez une “ligne” sur la lame : le <em>hamon</em>. 
      Parfois fluide, parfois indomptée, c’est la signature laissée par la trempe sélective — 
      un savoir-faire ancestral japonais. Chaque hamon est unique, fruit de l’acier, du feu et du geste.
    </p>
  </div>

  <!-- 🎠 CAROUSEL -->
  <div class="fade-slide-up mt-10">
    <div class="embla mx-auto">
      <div class="embla__viewport">
        <div class="embla__container">
          {[
            "hamon-1",
            "hamon-2",
            "hamon-3",
            "hamon-4",
            "hamon-5",
            "hamon-6"
          ].map(name => (
            <div class="embla__slide" key={name}>
              <div class="embla__parallax">
                <div class="embla__parallax__layer">
                  <img 
                    src={`/images/slider/${name}.webp`} 
                    alt={`Détail de couteau artisanal avec hamon atelier sous l'éclipse - ${name}`} 
                    class="embla__parallax__img" 
                    loading="lazy"
                  />
                </div>
              </div>
            </div>
          ))}
        </div>
      </div>

      <!-- Contrôles Embla -->
      <div class="embla__controls mt-4 flex items-center justify-between">
        <div class="embla__buttons flex gap-2">
          <button class="embla__button embla__button--prev" type="button" aria-label="Précédent">‹</button>
          <button class="embla__button embla__button--next" type="button" aria-label="Suivant">›</button>
        </div>
        <div class="embla__dots flex gap-2"></div>
      </div>
    </div>
  </div>

</section>
<script>
  import EmblaCarousel from 'embla-carousel';
  import { initEmbla } from '../scripts/init/init-embla.js';

  if (typeof window !== 'undefined') {
    document.querySelectorAll('.embla').forEach((root) => {
      initEmbla(root, EmblaCarousel);
    });
  }
</script>


<!-- ========================================================= -->
<!-- BLOC PREMIUM FINAL AVEC IMAGE, CITATION, ANIMATIONS & CARTE 3D -->
<!-- ========================================================= -->
<section id="contact" 
  class="parallax-section premium-section relative w-full text-center text-white overflow-hidden py-12 md:py-16"
  data-parallax-speed="120"
  data-parallax-zoom="1.05"
  data-parallax-zoom-strength="0.2"
>
  <!-- Calque parallaxe : uniquement l'image -->
  <div class="absolute inset-0" data-parallax-target 
       style="transform: translateY(0px) scale(1); will-change: transform;">
    <img 
      src="/images/packaging-ateliersousleclipse.webp"
      alt="Emballage artisanal d’un couteau Atelier sous l'éclipse"
      class="w-full h-full object-cover object-center"
    />
  </div>

  <!-- Overlay sombre -->
  <div class="absolute inset-0 bg-black/45 backdrop-blur-[2px]"></div>

  <!-- Contenu interactif -->
  <div class="relative z-10 px-4 max-w-6xl w-full space-y-6 mx-auto">
    <p class="text-2xl md:text-3xl font-serif italic fade-slide-up">
      « Chaque lame raconte une histoire… écrivons la vôtre. »
    </p>

    <div class="flex flex-wrap md:flex-row gap-3 justify-center fade-slide-up delay-150">
      <a href="/me-connaitre" class="cta-premium px-5 py-2.5 text-white rounded text-sm">Me connaître</a>
      <a href="/galerie" class="cta-premium px-5 py-2.5 text-white rounded text-sm">Voir la galerie</a>
    </div>

    <!-- Passage en GRID -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 justify-items-center mt-4 items-stretch">
      <!-- Carte 3D -->
      <div class="card-3d-wrapper fade-slide-up delay-300 md:justify-self-end">
        <div class="card-3d">
          <div class="card-face card-front">
            <img src="/images/carte-visite-ateliersousleclipse-recto.jpg" alt="Carte de visite Atelier sous l'éclipse recto" />
            <div class="card-glow fade-slide-up" aria-hidden="true"></div>
          </div>
          <div class="card-face card-back">
            <img src="/images/carte-visite-ateliersousleclipse-verso.jpg" alt="Carte de visite Atelier sous l'éclipse verso" />
          </div>
        </div>
      </div>

      <!-- Formulaire -->
      <form id="contact-form" action="/contact.php" method="POST" 
            class="bg-black/30 p-4 rounded-lg w-full max-w-xs h-full flex flex-col fade-slide-up delay-450 justify-self-start">
        <div class="space-y-3 flex-grow flex flex-col">
          <input type="text" name="nom" placeholder="Votre nom" 
                 class="w-full p-2.5 rounded bg-white/90 text-black text-sm" required>
          <input type="email" name="email" placeholder="Votre email" 
                 class="w-full p-2.5 rounded bg-white/90 text-black text-sm" required>
          <!-- Textarea qui s’étire -->
          <textarea name="message" placeholder="Votre message..." 
                    class="w-full p-2.5 rounded bg-white/90 text-black text-sm resize-none flex-grow" required></textarea>
        </div>
        <button type="submit" 
                class="cta-premium w-full px-5 py-2.5 rounded text-white text-sm mt-3">
          Envoyer
        </button>
      </form>
    </div>
  </div>
</section>


<!-- Popup Merci -->
<div id="merci-popup" 
     class="hidden fixed inset-0 flex items-center justify-center bg-black/70 z-50">
  <div class="bg-surface p-6 rounded-lg shadow-lg transform scale-95 opacity-0 transition-all duration-300 text-center max-w-sm">
    <img src="/images/merci-ateliersousleclipse2.webp" 
         alt="Merci Atelier sous l’éclipse" 
         class="mx-auto mb-4 w-80 h-auto rounded opacity-0 scale-90 transition-all duration-500" 
         id="merci-image"/>
    <p class="text-lg font-semibold text-muted">Merci pour votre message ! Je reviens vers vous rapidement.</p>
    <button class="mt-4 px-4 py-2 bg-accent text-white rounded hover:bg-accent-dark transition">
      Fermer
    </button>
  </div>
</div>


<script>
  import { initParallax } from '../scripts/layout/parallax.js';
  import { initHeroAnimation } from '../scripts/layout/hero-animation.js';
  import { initCarte3D } from '../scripts/features/carte-3d.js';
  import { popupform } from '../scripts/features/popupform.js';

  if (typeof window !== 'undefined') {
    initParallax();
    initHeroAnimation();
    initCarte3D();
    popupform();
  }
</script>

</BaseLayout>