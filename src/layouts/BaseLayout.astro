---
import "../styles/global.css";
const {
  title = "Atelier sous lâ€™Eclipse",
  description = "Couteaux artisanaux faits main en France",
  ogImage = "/images/og-home.jpg",
  url = "https://ateliersousleclipse.fr/"
} = Astro.props;
---

<!DOCTYPE html>
<html lang="fr" class="transition-colors duration-300 no-js">
  <head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{title}</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />

  <meta name="description" content={description} />

  <!-- Open Graph -->
  <meta property="og:title" content={title} />
  <meta property="og:description" content={description} />
  <meta property="og:type" content="website" />
  <meta property="og:url" content={url} />
  <meta property="og:image" content={ogImage} />
  <meta property="og:locale" content="fr_FR" />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content={title} />
  <meta name="twitter:description" content={description} />
  <meta name="twitter:image" content={ogImage} />

  <!-- JSON-LD: Organization -->
  <script type="application/ld+json">
    {JSON.stringify({
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "Atelier sous lâ€™Ã©clipse",
      "url": "https://ateliersousleclipse.fr/",
      "logo": "https://ateliersousleclipse.fr/images/logo-atelier-eclipse.png",
      "image": ogImage,
      "description": description,
      "sameAs": [
        "https://www.instagram.com/ateliersousleclipse",
        "https://www.facebook.com/AtelierSousEclipse"
      ]
    })}
  </script>

  <!-- JSON-LD: Person -->
  <script type="application/ld+json">
    {JSON.stringify({
      "@context": "https://schema.org",
      "@type": "Person",
      "name": "Yann",
      "jobTitle": "Artisan coutelier",
      "description": "Artisan coutelier en France, crÃ©ations de couteaux faits main : aciers haut de gamme, manches en bois prÃ©cieux, finitions dâ€™exception.",
      "image": "https://ateliersousleclipse.fr/images/portrait-yann.jpg",
      "url": "https://ateliersousleclipse.fr/",
      "sameAs": [
        "https://www.instagram.com/ateliersousleclipse",
        "https://www.facebook.com/AtelierSousEclipse"
      ],
      "knowsAbout": [
        "coutellerie artisanale",
        "trempe sÃ©lective",
        "hamon",
        "aciers carbone",
        "bois prÃ©cieux"
      ]
    })}
  </script>
</head>


  <body class={`flex flex-col min-h-screen font-sans bg-bg text-text ${Astro.props.bodyClass || ''}`}>
    <header id="site-header" class="fixed top-0 left-0 w-full z-50 bg-transparent backdrop-blur-sm transition-all duration-500">
      <div class="container mx-auto px-4 flex justify-between items-center h-20 relative">
        <div class="flex items-center space-x-4 header-brand">
          <!-- Placeholders pour FLIP (rÃ©ception dans le header) -->
          <span id="header-logo-placeholder"></span>
          <span id="header-title-placeholder"></span>
        </div>
        <nav class="hidden md:flex space-x-3 font-semibold" aria-label="Navigation principale">
          <a href="/" class="text-magnify hover:text-accent transition-colors">Accueil</a>
          <a href="/couteaux" class="text-magnify hover:text-accent transition-colors">Couteaux</a>
          <a href="/me-connaitre" class="text-magnify hover:text-accent transition-colors">Me connaÃ®tre</a>
          <a href="#contact" class="text-magnify hover:text-accent transition-colors">Contact</a>
        </nav>
        <div class="flex items-center space-x-4">
          <button id="theme-toggle" class="text-magnify p-2 rounded bg-surface text-text hover:text-accent transition-colors" aria-label="Changer le thÃ¨me">ðŸŒ™</button>
          <button id="menu-toggle" class="icon-toggle md:hidden p-2 rounded bg-surface text-text hover:text-accent transition-colors" aria-label="Ouvrir le menu">
            <span class="icon-burger">â˜°</span>
            <span class="icon-close">âœ•</span>
          </button>
        </div>
        <span id="header-accent"></span>
      </div>
    </header>

    <div class="menu-overlay"></div>

    <nav class="menu-mobile fixed top-5 right-2 w-56 max-h-[90vh] overflow-y-auto bg-surface backdrop-blur-sm rounded-xl shadow-xl p-6 flex flex-col space-y-4 transition-transform duration-300 z-[100]" aria-label="Menu mobile">
      <a href="/" class="hover:text-accent">Accueil</a>
      <a href="/couteaux" class="hover:text-accent">Couteaux</a>
      <a href="/me-connaitre" class="hover:text-accent">Me connaÃ®tre</a>
      <a href="#contact" class="hover:text-accent">Contact</a>
    </nav>

    <main class="flex-1">
      <!-- Sentinel pour dÃ©clencher le basculement au bon moment -->
      <div id="hero-sentinel" class="h-[1px] w-full"></div>

<!-- ========================================================= -->
<!-- HERO -->
<!-- ========================================================= -->
<section 
  class="hero-section parallax-section hamon-hero relative w-screen flex items-center justify-center overflow-hidden h-screen" 
  data-parallax-speed="50"
  data-parallax-zoom="1"
  data-parallax-zoom-strength="0"
>
  <!-- Image de fond -->
  <div class="absolute inset-0" data-parallax-target>
    <img src="/images/hero-hamon.webp" alt="Ligne du hamon sur lame" class="w-full h-full object-cover" />
  </div>

  <!-- Contenu -->
  <div id="hero-content" class="relative z-10 flex flex-col items-center justify-center h-full text-center px-4">
    
    <!-- Logo -->
    <div id="hero-logo-anchor" class="flex items-center justify-center mb-4">
      <!-- Ã‰lÃ©ment rÃ©el, dÃ©jÃ  centrÃ© dans le hero -->
      <img id="hero-logo" src="/images/poinÃ§on-large-transparent.png" alt="Logo Atelier sous lâ€™Ã©clipse" class="in-hero reveal fade-in-up" />
      <!-- Ghost cachÃ© -->
      <img id="hero-logo-ghost" src="/images/logo-eclipse.png" alt="" aria-hidden="true" class="ghost ghost-logo" />
    </div>

    <!-- Titre -->
    <div id="hero-title-anchor" class="flex items-center justify-center">
      <!-- Ã‰lÃ©ment rÃ©el, dÃ©jÃ  centrÃ© dans le hero -->
      <h1 id="hero-title" class="in-hero font-brand tracking-wide transition-all duration-700 reveal fade-in-up">
        Lâ€™Atelier sous lâ€™Ã©clipse
      </h1>
      <!-- Ghost cachÃ© -->
      <h1 id="hero-title-ghost" aria-hidden="true" class="ghost ghost-title font-brand" >
        Lâ€™Atelier sous lâ€™Ã©clipse
      </h1>
    </div>

    <!-- Sous-titre -->
    <p id="hero-subtitle" class="hero-subtitle text-lg md:text-xl text-accent font-bold max-w-none mx-auto opacity-0 mt-4">
      La ligne du <em>hamon</em> reflÃ¨te lâ€™histoire de lâ€™acier et lâ€™intention de lâ€™artisan.
    </p>
  </div>
</section>



      <slot />
    </main>


    <!-- ========================================================= -->
<!-- BLOC PREMIUM FINAL AVEC IMAGE, CITATION, ANIMATIONS & CARTE 3D -->
<!-- ========================================================= -->
<section id="contact" 
  class="parallax-section premium-section relative w-full text-center text-white overflow-hidden py-12 md:py-16"
  data-parallax-speed="120"
  data-parallax-zoom="1.05"
  data-parallax-zoom-strength="0.2"
>
  <!-- Calque parallaxe : uniquement l'image -->
  <div class="absolute inset-0" data-parallax-target 
       style="transform: translateY(0px) scale(1); will-change: transform;">
    <img 
      src="/images/packaging-ateliersousleclipse.webp"
      alt="Emballage artisanal dâ€™un couteau Atelier sous l'Ã©clipse"
      class="w-full h-full object-cover object-center"
    />
  </div>

  <!-- Overlay sombre -->
  <div class="absolute inset-0 bg-black/45 backdrop-blur-[2px]"></div>

  <!-- Contenu interactif -->
  <div class="relative z-10 px-4 max-w-6xl w-full space-y-6 mx-auto">
    <p class="text-2xl md:text-3xl font-serif italic fade-slide-up">
      Â«â€¯Chaque lame raconte une histoireâ€¦ Ã©crivons la vÃ´tre.â€¯Â»
    </p>

    <div class="flex flex-wrap md:flex-row gap-3 justify-center fade-slide-up delay-150">
      <a href="/me-connaitre" class="cta-premium px-5 py-2.5 text-white rounded text-sm">Me connaÃ®tre</a>
      <a href="/galerie" class="cta-premium px-5 py-2.5 text-white rounded text-sm">Voir la galerie</a>
    </div>

    <!-- Passage en GRID -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 justify-items-center mt-4 items-stretch">
      <!-- Carte 3D -->
      <div class="card-3d-wrapper fade-slide-up delay-300 md:justify-self-end">
        <div class="card-3d">
          <div class="card-face card-front">
            <img src="/images/carte-visite-ateliersousleclipse-recto.jpg" alt="Carte de visite Atelier sous l'Ã©clipse recto" />
            <div class="card-glow fade-slide-up" aria-hidden="true"></div>
          </div>
          <div class="card-face card-back">
            <img src="/images/carte-visite-ateliersousleclipse-verso.jpg" alt="Carte de visite Atelier sous l'Ã©clipse verso" />
          </div>
        </div>
      </div>

      <!-- Formulaire -->
      <form id="contact-form" action="/contact.php" method="POST" 
            class="bg-black/30 p-4 rounded-lg w-full max-w-xs h-full flex flex-col fade-slide-up delay-450 justify-self-start">
        <div class="space-y-3 flex-grow flex flex-col">
          <input type="text" name="nom" placeholder="Votre nom" 
                 class="w-full p-2.5 rounded bg-white/90 text-black text-sm" required>
          <input type="email" name="email" placeholder="Votre email" 
                 class="w-full p-2.5 rounded bg-white/90 text-black text-sm" required>
          <!-- Textarea qui sâ€™Ã©tire -->
          <textarea name="message" placeholder="Votre message..." 
                    class="w-full p-2.5 rounded bg-white/90 text-black text-sm resize-none flex-grow" required></textarea>
        </div>
        <button type="submit" 
                class="cta-premium w-full px-5 py-2.5 rounded text-white text-sm mt-3">
          Envoyer
        </button>
      </form>
    </div>
  </div>
</section>


    <!-- Footer -->
    <footer class="bg-surface text-muted text-center p-1 mt-auto relative overflow-visible">
      <div class="flex justify-center space-x-6 mt-4">
        <div class="relative group overflow-visible">
          <a href="https://www.instagram.com/ateliersousleclipse?igsh=MXI3bTMwMnc0bTZ6Zw==" aria-label="Instagram" class="hover:text-accent hover:scale-110 transition-transform" target="_blank" rel="noopener">
            <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" class="w-10 h-10"><path d="M7.5 2h9A5.5 5.5 0 0 1 22 7.5v9A5.5 5.5 0 0 1 16.5 22h-9A5.5 5.5 0 0 1 2 16.5v-9A5.5 5.5 0 0 1 7.5 2zm0 2A3.5 3.5 0 0 0 4 7.5v9A3.5 3.5 0 0 0 7.5 20h9a3.5 3.5 0 0 0 3.5-3.5v-9A3.5 3.5 0 0 0 16.5 4h-9zM12 7a5 5 0 1 1 0 10 5 5 0 0 1 0-10zm0 2a3 3 0 1 0 0 6 3 3 0 0 0 0-6zm5.75-2.25a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0z"/></svg>
          </a>
          <img src="/images/qr-code-INSTA-2.0.png" alt="QR code Instagram" class="qr absolute top-[-170px] left-1/2 -translate-x-1/2 opacity-0 scale-95 group-hover:opacity-100 group-hover:scale-100 transition-transform duration-300 bg-white p-1 z-[9999] pointer-events-none" />
        </div>

        <div class="relative group overflow-visible">
          <a href="https://www.facebook.com/AtelierSousEclipse/" aria-label="Facebook" class="hover:text-accent hover:scale-110 transition-transform" target="_blank" rel="noopener">
            <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" class="w-10 h-10"><path d="M22 12a10 10 0 1 0-11.5 9.9v-7h-2v-2.9h2v-2.2c0-2 1.2-3.1 3-3.1.9 0 1.8.1 1.8.1v2h-1c-1 0-1.3.6-1.3 1.2v2h2.3L15 14.9h-2v7A10 10 0 0 0 22 12"/></svg>
          </a>
          <img src="/images/qr-code-FB-2.0.png" alt="QR code Facebook" class="qr absolute top-[-170px] left-1/2 -translate-x-1/2 opacity-0 scale-95 group-hover:opacity-100 group-hover:scale-100 transition-transform duration-300 bg-white p-1 z-[9999] pointer-events-none" />
        </div>
      </div>
      <p class="mt-2">&copy; {new Date().getFullYear()} Atelier sous lâ€™Ã©clipse â€” Tous droits rÃ©servÃ©s.</p>
    </footer>
  </body>

  <script>
    import { initRevealOnScroll } from '../scripts/animations/reveal-on-scroll.js';
    import { initObserverCarousels } from '../scripts/init/observer-carousels.js';
    import { initHeaderSticky } from '../scripts/layout/header-sticky.js';
    import { initMenuMobile } from '../scripts/layout/menu-mobile.js';
    import { initThemeToggle } from '../scripts/layout/theme-toggle.js';
    import { initHeaderHero } from '../scripts/animations/header-hero.js';
    import { initCarte3D } from '../scripts/features/carte-3d.js';
    import { popupform } from '../scripts/features/popupform.js';
    if (typeof window !== 'undefined') {
      initRevealOnScroll();
      initObserverCarousels();
      initHeaderSticky();
      initMenuMobile();
      initThemeToggle();
      initHeaderHero();
      initCarte3D();
      popupform();
    }
  </script>
</html>
